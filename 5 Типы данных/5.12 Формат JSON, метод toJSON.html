<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        'use strict'

        // // Формат JSON, метод toJSON
        // let student = {
        //     name: 'John',
        //     age: 30,
        //     isAdmin: false,
        //     courses: ['html', 'css', 'js'],
        //     wife: null
        // };

        // let json = JSON.stringify(student);

        // console.log(typeof json);
        // console.log(json);

        // let user = {
        //     sayHi() {
        //         alert("Hello");
        //     },
        //     [Symbol("id")]: 123,
        //     something: undefined
        // };

        // console.log(JSON.stringify(user));

        // // вложенные объекты конвертируются автоматически

        // let meetup = {
        //     title: 'Conference',
        //     room: {
        //         number: 23,
        //         participants: ['john', 'ann']
        //     }
        // };

        // console.log(JSON.stringify(meetup));

        // // Исключаем и преобразуем: replacer


        // let room = {
        //     number: 23
        // };

        // let meetup = {
        //     title: 'Conference',
        //     participants: [{ name: 'John' }, { name: 'Alice' }],
        //     place: room
        // };

        // room.occupiedBy = meetup;

        // console.log(JSON.stringify(meetup, ['title', 'participants', 'place', 'name', 'number']));
        // console.log(JSON.stringify(meetup, function replacer(key, value) {
        //     return (key == 'occupiedBy') ? undefined : value;
        // }))

        // // Форматированиe: space

        // let user = {
        //     name: "John",
        //     age: 25,
        //     roles: {
        //         isAdmin: false,

        //         isEditor: true
        //     }
        // };
        // console.log(JSON.stringify(user, null, 2));

        // //  Пользовательский "toJSON"

        // let room = {
        //     number: 23,
        //     toJSON() {
        //         return this.number;
        //     }
        // };
        // console.log(JSON.stringify(room));

        // // JSON.parse

        // let str = '{"title":"Conference","date":"2017-11-30T12:00:00.000Z"}';
        // let meetup = JSON.parse(str, function (key, value) {
        //     return (key == 'date') ? new Date(value) : value;
        // });
        // console.log(meetup.date.getDate());

        // // Задачи
        // // Преобразуйте объект в JSON, а затем обратно в обычный объект

        // let user = {
        //     name: "Василий Иванович",
        //     age: 35
        // };

        // user = JSON.stringify(user);
        // console.log(user);
        // console.log(typeof(user));
        // user = JSON.parse(user);
        // console.log(user);
        // console.log(typeof(user));

        // Исключить обратные ссылки

        let room = {
            number: 23
        };
        let meetup = {
            title: "Совещание",
            occupiedBy: [{ name: "Иванов" }, { name: "Петров" }],
            place: room
        };

        room.occupiedBy = meetup;
        meetup.self = meetup;
        console.log(JSON.stringify(meetup, function replacer(key, value) {
            return (key != '' && value == meetup) ? undefined : value;
        }));

    </script>
</body>

</html>